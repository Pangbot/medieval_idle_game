<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" href="favicon/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Back to the Present</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div id="loading-screen">
        Loading Game...
    </div>
    
    <div id="customTooltip" class="custom-tooltip"></div>
    <!-- Top bar -->
    <header class="top-bar">
        <div class="title" data-help-id="title-help">Back to the Present</div>
        <div class="date" id="date" data-help-id="date-help">In-game Date</div>
        <div class="top-buttons">
            <button id="saveBtn" data-help-id="save-button-help">Save</button>
            <button id="helpBtn" data-help-id="help-button-help">?</button>
            <button id="journalBtn" data-help-id="journal-button-help">Journal</button>
            <button id="settingsBtn" data-help-id="settings-button-help">Settings</button>
        </div>
    </header>

    <!-- Main game layout -->
    <main class="game-layout">
    <!-- Left: Resources -->
    <section class="resources" data-help-id="resources-panel-help">
        <h2>Resources</h2>
        <span id="money"></span>

    <div class="resource-bar-container" data-help-id="health-bar-help">
        <h3>Health</h3>
        <div id="healthBarContainer" class="bar-background">
            <div id="healthBarFill" class="bar-fill"></div>
            <span id="healthBarText" class="bar-text"></span>
        </div>
    </div>

    <div class="resource-bar-container" data-help-id="motivation-bar-help">
        <h3>Motivation</h3>
        <div id="motivationBarContainer" class="bar-background">
            <div id="motivationBarFill" class="bar-fill"></div>
            <span id="motivationBarText" class="bar-text"></span>
        </div>
    </div>

    <div class="resource-bar-container" data-help-id="DBH-bar-help" id="dbhBarContainerWrapper" hidden>
        <h3>DBH</h3>
        <div id="DBHBarContainer" class="bar-background">
            <div id="DBHBarFill" class="bar-fill"></div>
            <span id="DBHBarText" class="bar-text"></span>
        </div>
    </div>

    <h2>Inventory</h2>
    <div class="inventory-box">
        <div class="inventory-container" data-help-id="inventory-help">
            <div class="inventory-items">
                <!-- Dynamically add inventory items -->
            </div>
        </div>
    </div>
    </section>

    <!-- Centre-left: Research -->
    <section class="research" data-help-id="research-panel-help">
        <h2>Research</h2>
        <div class="tabs" id="researchTabs">
            <!-- Dynamically add research tabs -->
        </div>
        <div class="buttons" id="researchBtns">
            <!-- Buttons of a specfic tab shown here -->
        </div>
    </section>

    <!-- Centre-right: Tasks -->
    <section class="tasks" data-help-id="tasks-panel-help">
        <h2>Tasks</h2>
        <div class="tabs" id="taskTabs">
            <!-- Dynamically add task tabs -->
        </div>
        <div class="buttons" id="taskBtns">
            <!-- Buttons of a specfic tab shown here -->
        </div>
    </section>

    <!-- Right: Log -->
    <section class="log" data-help-id="log-panel-help">
        <h2>Log</h2>
        <div class="logEntries">
            <!-- Logs inserted dynamically -->
        </div>
    </section>
    </main>

    <!-- Overlayed content -->
    <div id="gameOverlay" class="game-overlay">
        <!-- Settings -->
        <div id="settingsContainer" class="settings-container">
            <h1 class="settings-title">Settings</h1>

            <!-- Commenting out music option for now
            <div class="setting-item">
                <label for="musicVolume">Music</label>
                <input type="range" id="musicVolume" name="musicVolume" min="0" max="100" value="0">
                <span id="musicVolumeValue">0%</span>
            </div>
            -->

            <div class="setting-item">
                <label for="sfxVolume">SFX</label>
                <input type="range" id="sfxVolume" name="sfxVolume" min="0" max="100" value="80">
                <span id="sfxVolumeValue">80%</span>
                <button id="sfxTestButton">SFX Test</button>
            </div>

            <div class="setting-item">
                <label for="autosaveInterval">Autosave</label>
                <input type="range" id="autosaveInterval" name="autosaveInterval" min="0" max="60" value="30">
                <span id="autosaveIntervalValue">30 seconds</span>
            </div>

            <div class="setting-item">
                <label for="threshold">Threshold</label>
                <input type="range" id="threshold" name="threshold" min="0" max="50" value="10">
                <span id="thresholdValue">10%</span>
                <input type="checkbox" id="thresholdAlwaysOn" name="thresholdAlwaysOn">
                <label for="thresholdAlwaysOn">Always active</label>
                <span id="thresholdTooltip" hidden></span>
            </div>

            <div class="setting-item">
                <label for="emulateWindowSize">Emulate Screen Width</label>
                <select id="emulateWindowSize" name="emulateWindowSize">
                    <option value="600">600 px</option>
                    <option value="800">800 px</option>
                    <option value="1024">1024 px</option>
                    <option value="1280">1280 px</option>
                    <option value="1366">1366 px</option>
                    <option value="1440">1440 px</option>
                    <option value="1800">1800 px</option>
                    <option value="1920">1920 px</option>
                    <option value="2048">2048 px</option>
                    <option value="2880">2880 px</option>
                    <option value="3200">3200 px</option>
                    <option value="3840">3840 px</option>
                    <option value="5120">5120 px</option>
                    <option value="7680">7680 px</option>
                </select>
            <span id="emulateWindowSizeTooltip" hidden></span>
            </div>

            <div class="setting-item">
                <button id="analButton">I Like Things to be in Sync</button>
                <span id="analTooltip" hidden></span>
            </div>

            <div class="setting-item">
                <button class="import-save-btn">Import Save</button>
                <input type="text" id="importSaveTextBox" placeholder="(Paste save text here.)">
            </div>

            <div class="setting-item">
                <button class="export-save-btn">Export Save</button>
            </div>

            <div class="setting-item">
                <button class="delete-save-btn">Delete Save</button>
            </div>

            <h2 class="restart-warning">Game will restart after closing!</h2>

            <div class="close-button-container">
                <button class="close-button">Close</button>
            </div>
        </div>
        <!-- Help text/arrows -->
        <div id="helpTextContainer"></div>
        <svg id="helpArrows" class="help-arrows"></svg>
    </div>

    <script type="module">
        import { startGame } from './scripts/game.js';
        window.addEventListener('DOMContentLoaded', () => {
            startGame();
        });
    </script>
</body>
</html>
